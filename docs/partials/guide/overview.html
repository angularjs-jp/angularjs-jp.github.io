<h1><code ng:non-bindable=""></code>
<span class="hint"></span>
</h1>
<div><h2>Angular とは</h2>

<p>AngularJS は、動的 Web アプリケーションのためのフレームワークです。
Angular を使うことで、 HTML をテンプレート言語として使うことができ、
HTML の文法を拡張してアプリケーションのコンポーネントを明確かつ簡潔に表現することができます。
特に難しいことをしなくても AngularJS を使えば、あなたが現在書いている、
データバインディングや依存性注入のコードの大部分を取り除くことができます。
そして、それらの機能はすべてブラウザの Javascript の中で実現されるため、
どんなサーバサイドテクノロジとも共存できます。</p>

<p>もしも HTML がアプリケーションのために設計されていたら、 Angular 
のようになっていたでしょう。 
HTML は静的ドキュメントのための素晴らしい宣言型言語です。
しかし、アプリケーションを作ることを念頭に置かれていないので、
結果として、 Web アプリケーションを作るということは、 
<em>ブラウザをだまして、アプリケーションでやりたいことをやらせるにはどうしたらいいのか</em> 
ということに終始してしまいます。</p>

<p>動的なアプリケーションと静的なドキュメントと決定的な違いを埋めるためによく使われるのは、
下記の方法です。</p>

<ul>
<li><p><strong>ライブラリ</strong> - Web アプリケーションを書くために便利な関数の集合です。
あなたのコードが主体となり、適切なときにライブラリを呼び出すようにコードを書く必要があります。
例: jQuery</p></li>
<li><p><strong>フレームワーク</strong> - Web アプリケーションの特定の実装方法にしたがって、
詳細なコードを記述します。
フレームワークが主体となり、アプリケーション特有の処理が必要になったら、
あなたが記述したコードが呼び出されます。
例: knockout, sproutcore など</p></li>
</ul>

<p>Angular は、別のアプローチをとっています。
新たな HTML 構造を作ることにより、静的ドキュメント向けの HTML と 
Web アプリケーションとの不整合を最小限にすることを目指しています。 
Angular は directive と呼ばれる新しい HTML 構造の文法をブラウザに伝えます。
たとえば、下記のようなことを実現しています。</p>

<ul>
<li><code>{{}}</code> を使ったデータバインディング</li>
<li>DOM フラグメントを繰り返したり、隠すための DOM 制御構造</li>
<li>フォームとフォームのバリデーションのサポート</li>
<li>DOM 要素の裏で動作する code のアタッチ</li>
<li>HTML の集合を再利用可能なコンポーネントとして定義</li>
</ul>

<h3>End-to-end ソリューション</h3>

<p>Angular は Web アプリケーションを作るための 
end-to-end なソリューションを目指しています。
つまり、 Web アプリケーションを作るという巨大なパズルの 1 ピースではなく、
すべてが揃った完全な解を目指しているのです。
このようなことを目指しているので、
Angular は CRUD アプリケーションがどのように構築されるべきか、
頑なな方針を持っています。
しかし、この方針はあくまでスタート地点であり、簡単に変更できるようにもしています。
Angular は最初から下記の機能を搭載しています。</p>

<ul>
<li>CRUD アプリケーションを作るために必要なすべて: データバインディング、
基本的なテンプレート処理を提供するディレクティブ、フォームバリデーション、
ルーティング、 deep-linking 、最利用可能なコンポーネント、依存性注入</li>
<li>テスト容易性: ユニットテスト、 End-to-End テスト、モック、テストハーネス</li>
<li>開発を始めるときに使う、ディレクトリ構造とテストスクリプトが揃った、
アプリケーションのひな形</li>
</ul>

<h3>Angular が適しているアプリケーション</h3>

<p>Angular は、開発者に見える部分を高度に抽象化することで、
アプリケーション開発を単純化しています。
ただし、他の抽象化と同じように、抽象化を行うことで柔軟性が失われます。
言い換えれば、必ずしもすべてのアプリケーションにとって 
Angular が適しているわけではないということです。
Angular は、CRUDアプリケーションを念頭に作られました。
幸い、Webアプリケーションの 90% は CRUD アプリケーションが占めています。
しかし、Angular が何に適しているかを理解するためには、 Angular 
が適していないケースを理解しなければなりません。</p>

<p>ゲームや GUI エディタは、複雑で手の込んだ DOM 操作を行うアプリケーションの良い例です。
これらの種類のアプリケーションは CRUD アプリケーションとは違い、
結果として Angular は適していません。このようなケースでは、
jQuery などの DOM 操作をあまり抽象化していないライブラリの方が適しているかもしれません。</p>

<h2>Angular サンプルの解説</h2>

<p>次のサンプルは、入力フォームがある典型的な CRUD アプリケーションです。
入力フォームの値はバリデーションが行われ、合計を計算するために使用されます。
また、合計は特定のロケールにそってフォーマットされます。
このようなアプリケーションを作成するとき、
開発者はおおよそ次のような方法を考えるでしょう。</p>

<ul>
<li>UI にデータモデルをアタッチする</li>
<li>ユーザの入力を読み取り、チェックして、出力する</li>
<li>データモデルから新しい値(合計値)を計算する</li>
<li>ユーザのロケールに合わせて数値をフォーマットして出力する</li>
</ul>

<h3>Source</h3>
<div source-edit="" source-edit-deps="angular.js script.js" source-edit-html="index.html-73" source-edit-css="" source-edit-js="script.js-72" source-edit-unit="" source-edit-scenario="scenario.js-74"></div>
<div class="tabbable"><div class="tab-pane" title="index.html">
<pre class="prettyprint linenums" ng-set-text="index.html-73" ng-html-wrap=" angular.js script.js"></pre>
<script type="text/ng-template" id="index.html-73">
    <div ng-controller="InvoiceCntl">
      <b>Invoice:</b>
      <br>
      <br>
      <table>
       <tr><td>Quantity</td><td>Cost</td></tr>
       <tr>
         <td><input type="integer" min="0" ng-model="qty" required ></td>
         <td><input type="number" ng-model="cost" required ></td>
       </tr>
      </table>
      <hr>
      <b>Total:</b> {{qty * cost | currency}}
    </div>
  </script>
</div>
<div class="tab-pane" title="script.js">
<pre class="prettyprint linenums" ng-set-text="script.js-72"></pre>
<script type="text/ng-template" id="script.js-72">
    function InvoiceCntl($scope) {
      $scope.qty = 1;
      $scope.cost = 19.95;
    }
  </script>
</div>
<div class="tab-pane" title="End to end test">
<pre class="prettyprint linenums" ng-set-text="scenario.js-74"></pre>
<script type="text/ng-template" id="scenario.js-74">
    it('should show of angular binding', function() {
      expect(binding('qty * cost')).toEqual('$19.95');
      input('qty').enter('2');
      input('cost').enter('5.00');
      expect(binding('qty * cost')).toEqual('$10.00');
    });
  </script>
</div>
</div><h3>Demo</h3>
<div class="well doc-example-live" ng-embed-app="" ng-set-html="index.html-73" ng-eval-javascript="script.js-72"></div>

<p>上のライブプレビューを試してみたら、
サンプルコードの中で何が行われているか順にみていきましょう。</p>

<p><code>&lt;html&gt;</code> タグでは、Angular のアプリケーションであることを、 <code>ng-app</code>
ディレクティブをつけることで明示しています。 <code>ng-app</code> ディレクティブは、
Angular に <a href="guide/bootstrap">自動的な初期化</a> を実行させます。</p>

<pre><code>&lt;html ng-app&gt;
</code></pre>

<p>Angular は <code>&lt;script&gt;</code> タグで読み込みます。</p>

<pre><code>&lt;script src="https://ajax.googleapis.com/ajax/libs/angularjs/?.?.?/angular.min.js"&gt;&lt;/script&gt;
</code></pre>

<p><code>&lt;input&gt;</code> タグの <code>ng-model</code> 属性から、 Angular は自動的に 2 
方向のデータバインディングを行います。
また、ここで簡単な入力チェックも行なっています。</p>

<pre><code>Quantity: &lt;input type="integer" min="0" ng-model="qty" required &gt;
Cost: &lt;input type="number" ng-model="cost" required &gt;
</code></pre>

<p>これらの入力項目は十分自然に見えますが、次の 2 点がポイントです。</p>

<ul>
<li>ページがロードされたとき、 Angular は入力項目の名前 (<code>qty</code> と
<code>cost</code>) を同じ名前の変数にバインドします。これらの変数は
Model-View-Controller デザインパターンの"Model" に相当すると考えて
ください。</li>
<li>HTML の <a href="api/ng.directive:input"><code>input</code></a> 
要素は特別な機能があることに注意してください。
無効なデータを入力したり、入力フィールドが空のとき、
入力フィールドは赤色になって無効になります。
このような機能を使うと、 
CRUD アプリケーションによくある入力フィールドチェックを簡単に実装することができます。</li>
</ul>

<p>最後に、謎めいた <code>{{ double curly braces }}</code> の部分を見てみましょう。</p>

<pre><code>     Total: {{qty * cost | currency}}
</code></pre>

<p>この <code>{{ _expression_ }}</code> という表記法は、
データバインディングを行うための Angular のマークアップです。 
expression (式) は、別の <code>expression</code>や <a href="guide/dev_guide.templates.filters">filter</a> 
の組み合わせの形を取れます ( <code>{{ expression | filter }}</code> の形です ) 。
Angular には、表示するデータをフォーマットするためのフィルタが用意されています。</p>

<p>上の例で、二重中括弧の中の式は、「入力項目から取得したデータを掛け合わせ、
その結果を金額としてフォーマットして表示する」ということを Angular に指示しています。</p>

<p>注目すべきは、このアプリケーションの振る舞いを実現するために、
Angular のメソッドを呼び出したり、
フレームワークにしたがってアプリケーション特有の振る舞いだけを実装したわけではない、
ということです。
ブラウザが、静的ドキュメントではなく、
動的 Web アプリケーションに適した振る舞いをしているので、
このようなアプリケーションの振る舞いを実現できているのです。 
Angular を使うことで、ライブラリやフレームワークを呼び出す必要がなくなり、
静的ドキュメント向けの HTML と Web 
アプリケーションとの不整合が軽減されたことがお分かりになったと思います。</p>

<h2>The Zen of Angular</h2>

<p>Angular は、 UI を構築するときやソフトウェアのコンポーネント同士を結合するときには、
命令型のコードよりも宣言型のコードの方が適していて、
一方でビジネスロジックを記述するには命令型のコードが適している、
という信念に基づいて作られています。</p>

<ul>
<li>DOM 操作をアプリケーションロジックから切り離すのは、非常に良い考えです。
これによって、コードのテスタビリティが劇的に改善します。</li>
<li>アプリケーションのテストが、
アプリケーションを書くことと同じくらい大切であると捉えるのは、
実に重要なことです。
また、アプリケーションがテストしにくいものになるかどうかは、
コードの構造によって大きく左右されます。</li>
<li>アプリケーションのクライアントサイド処理と、
サーバサイド処理を切り離すのは素晴らしい考えです。
これによって、開発作業は同時に進めることができ、
それぞれの処理を再利用することができるようになります。</li>
<li>UI の設計からビジネスロジックの記述・テストまでのアプリケーション構築手順を、
フレームワークが開発者に示すことができれば、非常に便利です。</li>
<li>共通のタスクを簡単なものにして、
困難なタスクを可能なものにすることは、常にすばらしいことです。</li>
</ul>

<p>Angular を使えば、次のような面倒から解放されます。</p>

<ul>
<li><p><strong>コールバックの登録 :</strong> 
コールバックの登録を行うコードは、コード全体を散らかしてしまう原因になり、
必要なコードを見つけるのが難しくなります。
コールバックのような定型コードを取り除くのは良いことです。 
<em>あなたが</em> 書かなければならない JavaScript のコードの量を大幅に減らすことができ、
アプリケーションが一体何をしているのか把握しやすくなります。</p></li>
<li><p><strong>プログラムによる HTML DOM 操作 :</strong> 
HTML DOM 操作は AJAX アプリケーションの基礎ですが、
厄介で間違いのもとになります。アプリケーションの状態変化に合わせて、
UIがどのように変化すべきかを宣言的に記述することで、
低レベル DOM 操作のコードを書くタスクから解放されます。
Angular で書かれたたいていのアプリケーションは、
プログラムによって DOM 操作を行う必要がありませんが、
もし必要ならば DOM 操作を行うコードを書くこともできます。</p></li>
<li><p><strong>UI とのデータの受け渡し :</strong> 
CRUD 操作は AJAX アプリケーションの大半を占めます。
サーバからデータを受け取って内部オブジェクト・HTML フォームに渡して、
ユーザがフォームを編集できるようにし、入力チェックエラーがあれば表示して、
入力内容を内部のモデルに戻して、最後にまたサーバに送り返す、
というような処理には、大量の定形コードが必要です。 
Angular を使えば、このような定形コードをほぼすべて除去し、詳細な実装すべてを含むのではなく、
アプリケーション全体の処理フローだけが書かれたコードを作成することができます。</p></li>
<li><p><strong>大量の初期化用コードの記述 :</strong> 
単純な "Hello World" AJAX アプリケーションを記述したいだけなのに、
初期化を行うためのコードをたくさん書かなければならない、
というのはよくあることです。 Angular では、
service を使うことで簡単にアプリケーションの初期化をおこなうことができます。 
service は Guice に似た依存性注入スタイルで、
自動的にアプリケーションに読み込まれます。おまけに、
自動テストを行うときには、初期化プロセスを完全にコントロールできます。</p></li>
</ul>

<h2>Angular についてのプレゼンテーション</h2>

<p>次の動画は、2012年に行われた、Angular に関するプレゼンテーションです。</p>

<iframe width="560" height="315" src="http://www.youtube.com/embed/bfrn5VNpwsg" frameborder="0" allowfullscreen></iframe></div>
